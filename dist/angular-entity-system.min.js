!function(){"use strict";angular.module("angular-entity-system",[])}(),angular.module("angular-entity-system").provider("EntityAPI",function(){var a="",b="id";this.setApiUrl=function(a){this.apiUrl=a},this.setEntityIdentity=function(a){this.entityIdentity=a},this.setOnError=function(a){this.onError=a},this.$get=["$http","$q",function(c,d){function e(){}function f(a){b&&(a.getEntity=function(a){return this[this.getEntityIndex(a)]},a.getEntityIndex=function(a){var c=null;return this.some(function(d,e){return d[b]===a?(c=e,!0):!1}),null==c&&(console.groupCollapsed("Couldn't find the correct index for entity: "+a+" in array for identifier: "+b),console.log(this),console.groupEnd()),c},a.removeEntity=function(a){var b=this.getEntityIndex(a);null!=b&&this.splice(b,1)})}return e.prototype.get=function(b){return this.http=c.get(a+b),this},e.prototype.singular=function(){return this.singularEntity=!0,this},e.prototype.post=function(b,d){return this.http=c.post(a+b,this.sanitize(d)),this},e.prototype.put=function(b,d){return this.http=c.put(a+b,this.sanitize(d)),this},e.prototype["delete"]=function(b){return c["delete"](a+b)},e.prototype.sanitize=function(a){return"string"==typeof a||a instanceof String?void 0:JSON.stringify(a)},e.prototype.as=function(a){var b=d.defer(),c=this;return this.http.then(function(d){var e=[];return f(e),d.data instanceof Array?(d.data.forEach(function(b){e.push(a.build(b))}),void b.resolve(e)):c.singularEntity?void b.resolve(a.build(d.data)):(e.push(a.build(d.data)),void b.resolve(e))},function(a){b.reject(a)}),b.promise},new e}]}),angular.module("angular-entity-system").factory("Entity",["Mutator",function(a){function b(){}return b.prototype.clone=function(a){},b.build=function(b){var c=new this;for(var d in b)b.hasOwnProperty(d)&&(c[d]instanceof a?c[d]=c[d].transform(b[d]):c[d]=b[d]);for(var e in c)c[e]instanceof a&&(c[e]=c[e].transform(null));return c.clone&&c.clone(c),c},b}]),angular.module("angular-entity-system").factory("Mutator",function(){function a(a,b){this.mutation=a,this.arrayMutator=b}return a.prototype.transform=function(a){if(!this.arrayMutator&&Array.isArray(a)){var b=[];return a.forEach(function(a){b.push(this.mutation(a))}.bind(this)),b}return this.mutation(a)},a}),angular.module("angular-entity-system").factory("DateMutator",["Mutator",function(a){return function(){return new a(function(a){function b(a){a=new Date(a);var b=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=["January","February","March","April","May","June","July","August","September","October","November","December"];return a.getMonthName=function(){return c[this.getMonth()]},a.getDayName=function(){return b[this.getDay()]},a.humanDatetime=function(){return this.toString("MMMM dd, hh:mm tt")},a.humanTime=function(){return this.toString("hh:mm tt")},a.humanDate=function(){return this.toString("MMMM dd yyyy")},a.dayOfYear=function(){var a=new Date(this);return a.setMonth(0,0),Math.round((this-a)/864e5)},a}return a?b(a):null})}}]),angular.module("angular-entity-system").factory("EntityMutator",["Mutator",function(a){return function(b){return new a(function(a){if(!a)return null;if(a instanceof Array){var c=[];return a.forEach(function(a){c.push(b.build(a))}),c}return b.build(a)})}}]);